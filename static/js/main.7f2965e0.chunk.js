(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{261:function(e,t,a){e.exports=a(518)},266:function(e,t,a){},512:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABmJLR0QA/wD/AP+gvaeTAAABVUlEQVRIie2TPU7DQBCF38TBcoNkpyQd7iK6tHACBOFHW0IV7xWggbgMF6DYNkKKMIg70PsYdr0dEkgMjS2REHvXOEIUeZIle9/s+2a1HkIDSSm3ANww81u/37+L4/jTdi/ZFgoh3F6vN2fm02JpDuBSKfVhs99pAHlm5tG35T0Ag+Fw+JKmqfFkRpAQwg2C4AnA0Qp7YAurBRkgjWCVoAKSADiua8YWthLUEGIF+wESQri+7z8S0WjZawPrLEGcFpBS5wAe4jheyF74CILgjIgOW0BKnWRZttCscWCllGyTrJSqzerUmevUBrQB/U9QblGTmQq65UBWDRwzz4joypAzqzLK/K6pE631re/7IKILADtLds7MM631xJRjBCVJ8g7gunh+rT/9GXIAkFLurzt8PB4fFK85RVE0tbjstpo6YRi+ep7nEtEugO01A3JmvtdaT74Awqh6SCHeMgMAAAAASUVORK5CYII="},513:function(e,t,a){},514:function(e,t,a){e.exports=a.p+"static/media/youtubelogo.5ee8d6a1.png"},518:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),i=a.n(l),o=(a(266),a(56)),c=a(170),s=a.n(c),m=a(238),u=a(16),d=a.n(u),p="login_user",f="register_user",b="auth_user",E="logout_user",h="/api/users";var g=a(25),v=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(l){var i=Object(g.c)(function(e){return e.user}),o=Object(g.b)();return Object(n.useEffect)(function(){o(function(){var e=d.a.get("".concat(h,"/auth")).then(function(e){return e.data});return{type:b,payload:e}}()).then(function(){var e=Object(m.a)(s.a.mark(function e(n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,!n.payload.isAuth;case 2:if(!e.sent){e.next=6;break}t&&l.history.push("/register_login"),e.next=7;break;case 6:a&&!n.payload.isAdmin?l.history.push("/"):!1===t&&l.history.push("/");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},[o,l.history,i.googleAuth]),r.a.createElement(e,Object.assign({},l,{user:i}))}},y=a(14),w=a(524),O=a(522),S=a(39),j=a(519),I=a(82),k=a(46),x=a.n(k),C=w.a.Title,A=O.a.Meta;var F=function(){var e=Object(n.useState)([]),t=Object(y.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)(function(){d.a.get("/api/video/getVideos").then(function(e){e.data.success?(console.log(e.data.videos),l(e.data.videos)):alert("Failed to get Videos")})},[]);var i=a.map(function(e,t){var a=Math.floor(e.duration/60),n=Math.floor(e.duration-60*a);return r.a.createElement(S.a,{lg:6,md:8,xs:24},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("a",{href:"/video/".concat(e._id)},r.a.createElement("img",{style:{width:"100%"},alt:"thumbnail",src:"http://localhost:5000/".concat(e.thumbnail)}),r.a.createElement("div",{className:" duration",style:{bottom:0,right:0,position:"absolute",margin:"4px",color:"#fff",backgroundColor:"rgba(17, 17, 17, 0.8)",opacity:.8,padding:"2px 4px",borderRadius:"2px",letterSpacing:"0.5px",fontSize:"12px",fontWeight:"500",lineHeight:"12px"}},r.a.createElement("span",null,a," : ",n)))),r.a.createElement("br",null),r.a.createElement(A,{avatar:r.a.createElement(j.a,{src:e.writer.image}),title:e.title}),r.a.createElement("span",null,e.writer.name," "),r.a.createElement("br",null),r.a.createElement("span",{style:{marginLeft:"3rem"}}," ",e.views),"- ",r.a.createElement("span",null," ",x()(e.createdAt).format("MMM Do YY")," "))});return r.a.createElement("div",{style:{width:"85%",margin:"3rem auto"}},r.a.createElement(C,{level:2}," Recommended "),r.a.createElement("hr",null),r.a.createElement(I.a,{gutter:16},i))},N=a(132),P=a(34),L=a(523),T=a(526),D=a(10),_=a(527),B=a(178),M=w.a.Title;var R=Object(o.f)(function(e){var t=Object(g.b)(),a=!!localStorage.getItem("rememberMe"),l=Object(n.useState)(""),i=Object(y.a)(l,2),o=i[0],c=i[1],s=Object(n.useState)(a),m=Object(y.a)(s,2),u=m[0],f=m[1],b=function(){f(!u)},E=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):"";return r.a.createElement(N.a,{initialValues:{email:E,password:""},validationSchema:P.object().shape({email:P.string().email("Email is invalid").required("Email is required"),password:P.string().min(6,"Password must be at least 6 characters").required("Password is required")}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout(function(){var n={email:a.email,password:a.password};t(function(e){var t=d.a.post("".concat(h,"/login"),e).then(function(e){return e.data});return{type:p,payload:t}}(n)).then(function(t){t.payload.loginSuccess?(window.localStorage.setItem("userId",t.payload.userId),!0===u?window.localStorage.setItem("rememberMe",a.id):localStorage.removeItem("rememberMe"),e.history.push("/")):c("Check out your Account or Password again")}).catch(function(e){c("Check out your Account or Password again"),setTimeout(function(){c("")},3e3)}),r(!1)},500)}},function(e){var t=e.values,a=e.touched,n=e.errors,l=(e.dirty,e.isSubmitting),i=e.handleChange,c=e.handleBlur,s=e.handleSubmit;return e.handleReset,r.a.createElement("div",{className:"app"},r.a.createElement(M,{level:2},"Log In"),r.a.createElement("form",{onSubmit:s,style:{width:"350px"}},r.a.createElement(L.a.Item,{required:!0},r.a.createElement(T.a,{id:"email",prefix:r.a.createElement(D.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your email",type:"email",value:t.email,onChange:i,onBlur:c,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(L.a.Item,{required:!0},r.a.createElement(T.a,{id:"password",prefix:r.a.createElement(D.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your password",type:"password",value:t.password,onChange:i,onBlur:c,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),o&&r.a.createElement("label",null,r.a.createElement("p",{style:{color:"#ff0000bf",fontSize:"0.7rem",border:"1px solid",padding:"1rem",borderRadius:"10px"}},o)),r.a.createElement(L.a.Item,null,r.a.createElement(_.a,{id:"rememberMe",onChange:b,checked:u},"Remember me"),r.a.createElement("a",{className:"login-form-forgot",href:"/reset_user",style:{float:"right"}},"forgot password"),r.a.createElement("div",null,r.a.createElement(B.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:l,onSubmit:s},"Log in")),"Or ",r.a.createElement("a",{href:"/register"},"register now!"))))})}),q={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},V={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var z=function(e){var t=Object(g.b)();return r.a.createElement(N.a,{initialValues:{email:"",lastName:"",name:"",password:"",confirmPassword:""},validationSchema:P.object().shape({name:P.string().required("Name is required"),lastName:P.string().required("Last Name is required"),email:P.string().email("Email is invalid").required("Email is required"),password:P.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:P.string().oneOf([P.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout(function(){var n={email:a.email,password:a.password,name:a.name,lastname:a.lastname,image:"http://gravatar.com/avatar/".concat(x()().unix(),"?d=identicon")};t(function(e){var t=d.a.post("".concat(h,"/register"),e).then(function(e){return e.data});return{type:f,payload:t}}(n)).then(function(t){t.payload.success?e.history.push("/login"):alert(t.payload.err.errmsg)}),r(!1)},500)}},function(e){var t=e.values,a=e.touched,n=e.errors,l=(e.dirty,e.isSubmitting),i=e.handleChange,o=e.handleBlur,c=e.handleSubmit;return e.handleReset,r.a.createElement("div",{className:"app"},r.a.createElement("h2",null,"Sign up"),r.a.createElement(L.a,Object.assign({style:{minWidth:"375px"}},q,{onSubmit:c}),r.a.createElement(L.a.Item,{required:!0,label:"Name"},r.a.createElement(T.a,{id:"name",placeholder:"Enter your name",type:"text",value:t.name,onChange:i,onBlur:o,className:n.name&&a.name?"text-input error":"text-input"}),n.name&&a.name&&r.a.createElement("div",{className:"input-feedback"},n.name)),r.a.createElement(L.a.Item,{required:!0,label:"Last Name"},r.a.createElement(T.a,{id:"lastName",placeholder:"Enter your Last Name",type:"text",value:t.lastName,onChange:i,onBlur:o,className:n.lastName&&a.lastName?"text-input error":"text-input"}),n.lastName&&a.lastName&&r.a.createElement("div",{className:"input-feedback"},n.lastName)),r.a.createElement(L.a.Item,{required:!0,label:"Email",hasFeedback:!0,validateStatus:n.email&&a.email?"error":"success"},r.a.createElement(T.a,{id:"email",placeholder:"Enter your Email",type:"email",value:t.email,onChange:i,onBlur:o,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(L.a.Item,{required:!0,label:"Password",hasFeedback:!0,validateStatus:n.password&&a.password?"error":"success"},r.a.createElement(T.a,{id:"password",placeholder:"Enter your password",type:"password",value:t.password,onChange:i,onBlur:o,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),r.a.createElement(L.a.Item,{required:!0,label:"Confirm",hasFeedback:!0},r.a.createElement(T.a,{id:"confirmPassword",placeholder:"Enter your confirmPassword",type:"password",value:t.confirmPassword,onChange:i,onBlur:o,className:n.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),n.confirmPassword&&a.confirmPassword&&r.a.createElement("div",{className:"input-feedback"},n.confirmPassword)),r.a.createElement(L.a.Item,V,r.a.createElement(B.a,{onClick:c,type:"primary",disabled:l},"Submit"))))})},W=a(525);var U=function(e){return r.a.createElement(W.a,{mode:e.mode},r.a.createElement(W.a.Item,{key:"mail"},r.a.createElement("a",{href:"/"},"Home")),r.a.createElement(W.a.Item,{key:"subscription"},r.a.createElement("a",{href:"/subscription"},"Subscription")))},K=a(512);var H=Object(o.f)(function(e){var t=Object(g.c)(function(e){return e.user});return t.userData&&!t.userData.isAuth?r.a.createElement(W.a,{mode:e.mode},r.a.createElement(W.a.Item,{key:"mail"},r.a.createElement("a",{href:"/login"},"Signin")),r.a.createElement(W.a.Item,{key:"app"},r.a.createElement("a",{href:"/register"},"Signup"))):r.a.createElement(W.a,{mode:e.mode},r.a.createElement(W.a.Item,{key:"create"},r.a.createElement("a",{href:"/video/upload"},r.a.createElement("img",{src:K,alt:"Upload"}))),r.a.createElement(W.a.Item,{key:"logout"},r.a.createElement("a",{onClick:function(){d.a.get("".concat(h,"/logout")).then(function(t){200===t.status?e.history.push("/login"):alert("Log Out Failed")})}},"Logout")))}),Y=a(528),Q=(a(513),a(514));var J=function(){var e=Object(n.useState)(!1),t=Object(y.a)(e,2),a=t[0],l=t[1];return r.a.createElement("nav",{className:"menu",style:{position:"fixed",zIndex:1,width:"100%"}},r.a.createElement("div",{className:"menu__logo"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:Q,alt:"Logo",style:{width:"90%",marginTop:"-5px"}}))),r.a.createElement("div",{className:"menu__container"},r.a.createElement("div",{className:"menu_left"},r.a.createElement(U,{mode:"horizontal"})),r.a.createElement("div",{className:"menu_rigth"},r.a.createElement(H,{mode:"horizontal"})),r.a.createElement(B.a,{className:"menu__mobile-button",type:"primary",onClick:function(){l(!0)}},r.a.createElement(D.a,{type:"align-right"})),r.a.createElement(Y.a,{title:"Basic Drawer",placement:"right",className:"menu_drawer",closable:!1,onClose:function(){l(!1)},visible:a},r.a.createElement(U,{mode:"inline"}),r.a.createElement(H,{mode:"inline"}))))};var G=function(){return r.a.createElement("div",{style:{height:"80px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"1rem"}},r.a.createElement("p",null," Happy Coding  ",r.a.createElement(D.a,{type:"smile"})))},X=a(258),Z=w.a.Title,$=T.a.TextArea,ee=[{value:0,label:"Private"},{value:1,label:"Public"}],te=[{value:0,label:"Film & Animation"},{value:0,label:"Autos & Vehicles"},{value:0,label:"Music"},{value:0,label:"Pets & Animals"},{value:0,label:"Sports"}];var ae=function(e){var t=Object(g.c)(function(e){return e.user}),a=Object(n.useState)(""),l=Object(y.a)(a,2),i=l[0],o=l[1],c=Object(n.useState)(""),s=Object(y.a)(c,2),m=s[0],u=s[1],p=Object(n.useState)(0),f=Object(y.a)(p,2),b=f[0],E=f[1],h=Object(n.useState)("Film & Animation"),v=Object(y.a)(h,2),w=v[0],O=v[1],S=Object(n.useState)(""),j=Object(y.a)(S,2),I=j[0],k=j[1],x=Object(n.useState)(""),C=Object(y.a)(x,2),A=C[0],F=C[1],N=Object(n.useState)(""),P=Object(y.a)(N,2),_=P[0],M=P[1],R=function(a){if(a.preventDefault(),t.userData&&!t.userData.isAuth)return alert("Please Log in First");if(""===i||""===m||""===w||""===I||""===A||""===_)return alert("Please first fill all the fields");var n={writer:t.userData._id,title:i,description:m,privacy:b,filePath:I,category:w,duration:A,thumbnail:_};d.a.post("/api/video/uploadVideo",n).then(function(t){t.data.success?(alert("video Uploaded Successfully"),e.history.push("/")):alert("Failed to upload video")})};return r.a.createElement("div",{style:{maxWidth:"700px",margin:"2rem auto"}},r.a.createElement("div",{style:{textAlign:"center",marginBottom:"2rem"}},r.a.createElement(Z,{level:2}," Upload Video")),r.a.createElement(L.a,{onSubmit:R},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(X.a,{onDrop:function(e){var t=new FormData;console.log(e),t.append("file",e[0]),d.a.post("http://localhost:5000/api/video/uploadfiles",t,{header:{"content-type":"multipart/form-data"}}).then(function(e){if(e.data.success){var t={filePath:e.data.filePath,fileName:e.data.fileName};k(e.data.filePath),d.a.post("/api/video/thumbnail",t).then(function(e){e.data.success?(F(e.data.fileDuration),M(e.data.thumbsFilePath)):alert("Failed to make the thumbnails")})}else alert("failed to save the video in server")})},multiple:!1,maxSize:8e8},function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",Object.assign({style:{width:"300px",height:"240px",border:"1px solid lightgray",display:"flex",alignItems:"center",justifyContent:"center"}},t()),r.a.createElement("input",a()),r.a.createElement(D.a,{type:"plus",style:{fontSize:"3rem"}}))}),""!==_&&r.a.createElement("div",null,r.a.createElement("img",{src:"http://localhost:5000/".concat(_),alt:"haha"}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Title"),r.a.createElement(T.a,{onChange:function(e){o(e.currentTarget.value)},value:i}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Description"),r.a.createElement($,{onChange:function(e){console.log(e.currentTarget.value),u(e.currentTarget.value)},value:m}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("select",{onChange:function(e){E(e.currentTarget.value)}},ee.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("select",{onChange:function(e){O(e.currentTarget.value)}},te.map(function(e,t){return r.a.createElement("option",{key:t,value:e.label},e.label)})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(B.a,{type:"primary",size:"large",onClick:R},"Submit")))},ne=a(521);var re=function(){var e=Object(n.useState)([]),t=Object(y.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)(function(){d.a.get("/api/video/getVideos").then(function(e){e.data.success?(console.log(e.data.videos),l(e.data.videos)):alert("Failed to get Videos")})},[]);var i=a.map(function(e,t){var a=Math.floor(e.duration/60),n=Math.floor(e.duration-60*a);return r.a.createElement("div",{style:{display:"flex",marginTop:"1rem",padding:"0 2rem"}},r.a.createElement("div",{style:{width:"40%",marginRight:"1rem"}},r.a.createElement("a",{href:"/video/".concat(e._id),style:{color:"gray"}},r.a.createElement("img",{style:{width:"100%"},src:"http://localhost:5000/".concat(e.thumbnail),alt:"thumbnail"}))),r.a.createElement("div",{style:{width:"50%"}},r.a.createElement("a",{href:"/video/".concat(e._id),style:{color:"gray"}},r.a.createElement("span",{style:{fontSize:"1rem",color:"black"}},e.title,"  "),r.a.createElement("br",null),r.a.createElement("span",null,e.writer.name),r.a.createElement("br",null),r.a.createElement("span",null,e.views),r.a.createElement("br",null),r.a.createElement("span",null,a," : ",n),r.a.createElement("br",null))))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{marginTop:"3rem"}}),i)};var le=function(e){var t=e.userTo,a=e.userFrom,l=Object(n.useState)(0),i=Object(y.a)(l,2),o=i[0],c=i[1],s=Object(n.useState)(!1),m=Object(y.a)(s,2),u=m[0],p=m[1];return Object(n.useEffect)(function(){var e={userTo:t,userFrom:a};d.a.post("/api/subscribe/subscribeNumber",e).then(function(e){e.data.success?c(e.data.subscribeNumber):alert("Failed to get subscriber Number")}),d.a.post("/api/subscribe/subscribed",e).then(function(e){e.data.success?p(e.data.subcribed):alert("Failed to get Subscribed Information")})},[]),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){var e={userTo:t,userFrom:a};u?d.a.post("/api/subscribe/unSubscribe",e).then(function(e){e.data.success?(c(o-1),p(!u)):alert("Failed to unsubscribe")}):d.a.post("/api/subscribe/subscribe",e).then(function(e){e.data.success?(c(o+1),p(!u)):alert("Failed to subscribe")})},style:{backgroundColor:"".concat(u?"#AAAAAA":"#CC0000"),borderRadius:"4px",color:"white",padding:"10px 16px",fontWeight:"500",fontSize:"1rem",textTransform:"uppercase"}},o," ",u?"Subscribed":"Subscribe"))},ie=a(520),oe=a(99);var ce=function(e){var t=Object(n.useState)(0),a=Object(y.a)(t,2),l=a[0],i=a[1],o=Object(n.useState)(0),c=Object(y.a)(o,2),s=c[0],m=c[1],u=Object(n.useState)(null),p=Object(y.a)(u,2),f=p[0],b=p[1],E=Object(n.useState)(null),h=Object(y.a)(E,2),g=h[0],v=h[1],w={};return w=e.video?{videoId:e.videoId,userId:e.userId}:{commentId:e.commentId,userId:e.userId},Object(n.useEffect)(function(){d.a.post("/api/like/getLikes",w).then(function(t){console.log("getLikes",t.data),t.data.success?(i(t.data.likes.length),t.data.likes.map(function(t){t.userId===e.userId&&b("liked")})):alert("Failed to get likes")}),d.a.post("/api/like/getDislikes",w).then(function(t){console.log("getDislike",t.data),t.data.success?(m(t.data.dislikes.length),t.data.dislikes.map(function(t){t.userId===e.userId&&v("disliked")})):alert("Failed to get dislikes")})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{key:"comment-basic-like"},r.a.createElement(oe.a,{title:"Like"},r.a.createElement(D.a,{type:"like",theme:"liked"===f?"filled":"outlined",onClick:function(){null===f?d.a.post("/api/like/upLike",w).then(function(e){e.data.success?(i(l+1),b("liked"),null!==g&&(v(null),m(s-1))):alert("Failed to increase the like")}):d.a.post("/api/like/unLike",w).then(function(e){e.data.success?(i(l-1),b(null)):alert("Failed to decrease the like")})}})),r.a.createElement("span",{style:{paddingLeft:"8px",cursor:"auto"}},l)),"\xa0\xa0",r.a.createElement("span",{key:"comment-basic-dislike"},r.a.createElement(oe.a,{title:"Dislike"},r.a.createElement(D.a,{type:"dislike",theme:"disliked"===g?"filled":"outlined",onClick:function(){null!==g?d.a.post("/api/like/unDisLike",w).then(function(e){e.data.success?(m(s-1),v(null)):alert("Failed to decrease dislike")}):d.a.post("/api/like/upDisLike",w).then(function(e){e.data.success?(m(s+1),v("disliked"),null!==f&&(b(null),i(l-1))):alert("Failed to increase dislike")})}})),r.a.createElement("span",{style:{paddingLeft:"8px",cursor:"auto"}},s)))},se=T.a.TextArea;var me=function(e){var t=Object(g.c)(function(e){return e.user}),a=Object(n.useState)(""),l=Object(y.a)(a,2),i=l[0],o=l[1],c=Object(n.useState)(!1),s=Object(y.a)(c,2),m=s[0],u=s[1],p=function(a){a.preventDefault();var n={writer:t.userData._id,postId:e.postId,responseTo:e.comment._id,content:i};d.a.post("/api/comment/saveComment",n).then(function(t){t.data.success?(o(""),u(!m),e.refreshFunction(t.data.result)):alert("Failed to save Comment")})},f=[r.a.createElement(ce,{comment:!0,commentId:e.comment._id,userId:localStorage.getItem("userId")}),r.a.createElement("span",{onClick:function(){u(!m)},key:"comment-basic-reply-to"},"Reply to ")];return r.a.createElement("div",null,r.a.createElement(ie.a,{actions:f,author:e.comment.writer.name,avatar:r.a.createElement(j.a,{src:e.comment.writer.image,alt:"image"}),content:r.a.createElement("p",null,e.comment.content)}),m&&r.a.createElement("form",{style:{display:"flex"},onSubmit:p},r.a.createElement(se,{style:{width:"100%",borderRadius:"5px"},onChange:function(e){o(e.currentTarget.value)},value:i,placeholder:"write some comments"}),r.a.createElement("br",null),r.a.createElement(B.a,{style:{width:"20%",height:"52px"},onClick:p},"Submit")))};var ue=function e(t){var a=Object(n.useState)(0),l=Object(y.a)(a,2),i=l[0],o=l[1],c=Object(n.useState)(!1),s=Object(y.a)(c,2),m=s[0],u=s[1];Object(n.useEffect)(function(){var e=0;t.CommentLists.map(function(a){a.responseTo===t.parentCommentId&&e++}),o(e)},[t.CommentLists,t.parentCommentId]);var d;return r.a.createElement("div",null,i>0&&r.a.createElement("p",{style:{fontSize:"14px",margin:0,color:"gray"},onClick:function(){u(!m)}},"View ",i," more comment(s)"),m&&(d=t.parentCommentId,t.CommentLists.map(function(a,n){return r.a.createElement(r.a.Fragment,null,a.responseTo===d&&r.a.createElement("div",{style:{width:"80%",marginLeft:"40px"}},r.a.createElement(me,{comment:a,postId:t.postId,refreshFunction:t.refreshFunction}),r.a.createElement(e,{CommentLists:t.CommentLists,parentCommentId:a._id,postId:t.postId,refreshFunction:t.refreshFunction})))})))},de=T.a.TextArea;var pe=function(e){var t=Object(g.c)(function(e){return e.user}),a=Object(n.useState)(""),l=Object(y.a)(a,2),i=l[0],o=l[1],c=function(a){a.preventDefault();var n={content:i,writer:t.userData._id,postId:e.postId};d.a.post("/api/comment/saveComment",n).then(function(t){t.data.success?(o(""),e.refreshFunction(t.data.result)):alert("Failed to save Comment")})};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",null," replies"),r.a.createElement("hr",null),console.log(e.CommentLists),e.CommentLists&&e.CommentLists.map(function(t,a){return!t.responseTo&&r.a.createElement(r.a.Fragment,null,r.a.createElement(me,{comment:t,postId:e.postId,refreshFunction:e.refreshFunction}),r.a.createElement(ue,{CommentLists:e.CommentLists,postId:e.postId,parentCommentId:t._id,refreshFunction:e.refreshFunction}))}),r.a.createElement("form",{style:{display:"flex"},onSubmit:c},r.a.createElement(de,{style:{width:"100%",borderRadius:"5px"},onChange:function(e){o(e.currentTarget.value)},value:i,placeholder:"write some comments"}),r.a.createElement("br",null),r.a.createElement(B.a,{style:{width:"20%",height:"52px"},onClick:c},"Submit")))};var fe=function(e){var t=e.match.params.videoId,a=Object(n.useState)([]),l=Object(y.a)(a,2),i=l[0],o=l[1],c=Object(n.useState)([]),s=Object(y.a)(c,2),m=s[0],u=s[1],p={videoId:t};return Object(n.useEffect)(function(){d.a.post("/api/video/getVideo",p).then(function(e){e.data.success?(console.log(e.data.video),o(e.data.video)):alert("Failed to get video Info")}),d.a.post("/api/comment/getComments",p).then(function(e){e.data.success?(console.log("response.data.comments",e.data.comments),u(e.data.comments)):alert("Failed to get video Info")})},[]),i.writer?r.a.createElement(I.a,null,r.a.createElement(S.a,{lg:18,xs:24},r.a.createElement("div",{className:"postPage",style:{width:"100%",padding:"3rem 4em"}},r.a.createElement("video",{style:{width:"100%"},src:"http://localhost:5000/".concat(i.filePath),controls:!0}),r.a.createElement(ne.a.Item,{actions:[r.a.createElement(ce,{video:!0,videoId:t,userId:localStorage.getItem("userId")}),r.a.createElement(le,{userTo:i.writer._id,userFrom:localStorage.getItem("userId")})]},r.a.createElement(ne.a.Item.Meta,{avatar:r.a.createElement(j.a,{src:i.writer&&i.writer.image}),title:r.a.createElement("a",{href:"https://ant.design"},i.title),description:i.description}),r.a.createElement("div",null)),r.a.createElement(pe,{CommentLists:m,postId:i._id,refreshFunction:function(e){u(m.concat(e))}}))),r.a.createElement(S.a,{lg:6,xs:24},r.a.createElement(re,null))):r.a.createElement("div",null,"Loading...")},be=w.a.Title,Ee=O.a.Meta;var he=function(){var e=Object(n.useState)([]),t=Object(y.a)(e,2),a=t[0],l=t[1],i={userFrom:localStorage.getItem("userId")};Object(n.useEffect)(function(){d.a.post("/api/video/getSubscriptionVideos",i).then(function(e){e.data.success?l(e.data.videos):alert("Failed to get subscription videos")})},[]);var o=a.map(function(e,t){var a=Math.floor(e.duration/60),n=Math.floor(e.duration-60*a);return r.a.createElement(S.a,{lg:6,md:8,xs:24},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("a",{href:"/video/".concat(e._id)},r.a.createElement("img",{style:{width:"100%"},alt:"thumbnail",src:"http://localhost:5000/".concat(e.thumbnail)}),r.a.createElement("div",{className:" duration",style:{bottom:0,right:0,position:"absolute",margin:"4px",color:"#fff",backgroundColor:"rgba(17, 17, 17, 0.8)",opacity:.8,padding:"2px 4px",borderRadius:"2px",letterSpacing:"0.5px",fontSize:"12px",fontWeight:"500",lineHeight:"12px"}},r.a.createElement("span",null,a," : ",n)))),r.a.createElement("br",null),r.a.createElement(Ee,{avatar:r.a.createElement(j.a,{src:e.writer.image}),title:e.title}),r.a.createElement("span",null,e.writer.name," "),r.a.createElement("br",null),r.a.createElement("span",{style:{marginLeft:"3rem"}}," ",e.views),"- ",r.a.createElement("span",null," ",x()(e.createdAt).format("MMM Do YY")," "))});return r.a.createElement("div",{style:{width:"85%",margin:"3rem auto"}},r.a.createElement(be,{level:2}," Subscribed Videos "),r.a.createElement("hr",null),r.a.createElement(I.a,{gutter:16},o))};var ge=function(){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(J,null),r.a.createElement("div",{style:{paddingTop:"75px",minHeight:"calc(100vh - 80px)"}},r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:v(F,null)}),r.a.createElement(o.a,{exact:!0,path:"/login",component:v(R,!1)}),r.a.createElement(o.a,{exact:!0,path:"/register",component:v(z,!1)}),r.a.createElement(o.a,{exact:!0,path:"/video/upload",component:v(ae,!0)}),r.a.createElement(o.a,{exact:!0,path:"/video/:videoId",component:v(fe,null)}),r.a.createElement(o.a,{exact:!0,path:"/subscription",component:v(he,null)}))),r.a.createElement(G,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=a(92),ye=a(69),we=a(255);function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(a,!0).forEach(function(t){Object(we.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var je=Object(ye.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Se({},e,{register:t.payload});case p:return Se({},e,{loginSucces:t.payload});case b:return Se({},e,{userData:t.payload});case E:return Se({},e);default:return e}}}),Ie=a(256),ke=a.n(Ie),xe=a(257),Ce=Object(ye.a)(ke.a,xe.a)(ye.d);i.a.render(r.a.createElement(g.a,{store:Ce(je,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},r.a.createElement(ve.a,null,r.a.createElement(ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[261,1,2]]]);
//# sourceMappingURL=main.7f2965e0.chunk.js.map